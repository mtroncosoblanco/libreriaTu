{"version":3,"sources":["../../../src/services/category.service.ts"],"sourcesContent":["import { prisma } from \"../database/database\";\r\nimport { HttpException } from \"../exceptions/httpException\";\r\nimport { Category } from \"@prisma/client\";\r\n\r\n//TODO problema, mejor usar el patr√≥n singleton\r\n\r\nexport class CategoryService {\r\n  static async getAll() {\r\n    return prisma.category.findMany();\r\n  }\r\n\r\n  static async getById(id: number) {\r\n    const findOffert = await prisma.category.findUnique({ where: { id: id } });\r\n    if (!findOffert) throw new HttpException(404, \"Category doesn't exist\");\r\n\r\n    return findOffert;\r\n  }\r\n\r\n  static async create(category: Category) {\r\n    try{\r\n      return await prisma.category.create({\r\n        data: {\r\n          ...category,\r\n        },\r\n      });\r\n    }catch(error){\r\n        throw new HttpException(401, \"Error creating category\");\r\n      }\r\n  }\r\n\r\n  static async update(id: number, category: Category) {\r\n    try {\r\n      return await prisma.category.update({\r\n        where: { id },\r\n        data: { ...category },\r\n      });\r\n    } catch (error) {\r\n      throw new HttpException(404, \"Category not found\");\r\n    }\r\n  }\r\n\r\n  static async delete(id: number) {\r\n    try {\r\n      return await prisma.category.delete({ where: { id } });\r\n    } catch (error) {\r\n      throw new HttpException(404, \"Category not found\");\r\n    }\r\n  }\r\n}\r\n"],"names":["CategoryService","getAll","prisma","category","findMany","getById","id","findOffert","findUnique","where","HttpException","create","data","error","update","delete"],"mappings":";;;;+BAMaA;;;eAAAA;;;0BANU;+BACO;AAKvB,IAAA,AAAMA,kBAAN,MAAMA;IACX,aAAaC,SAAS;QACpB,OAAOC,gBAAM,CAACC,QAAQ,CAACC,QAAQ;IACjC;IAEA,aAAaC,QAAQC,EAAU,EAAE;QAC/B,MAAMC,aAAa,MAAML,gBAAM,CAACC,QAAQ,CAACK,UAAU,CAAC;YAAEC,OAAO;gBAAEH,IAAIA;YAAG;QAAE;QACxE,IAAI,CAACC,YAAY,MAAM,IAAIG,4BAAa,CAAC,KAAK;QAE9C,OAAOH;IACT;IAEA,aAAaI,OAAOR,QAAkB,EAAE;QACtC,IAAG;YACD,OAAO,MAAMD,gBAAM,CAACC,QAAQ,CAACQ,MAAM,CAAC;gBAClCC,MAAM;oBACJ,GAAGT,QAAQ;gBACb;YACF;QACF,EAAC,OAAMU,OAAM;YACT,MAAM,IAAIH,4BAAa,CAAC,KAAK;QAC/B;IACJ;IAEA,aAAaI,OAAOR,EAAU,EAAEH,QAAkB,EAAE;QAClD,IAAI;YACF,OAAO,MAAMD,gBAAM,CAACC,QAAQ,CAACW,MAAM,CAAC;gBAClCL,OAAO;oBAAEH;gBAAG;gBACZM,MAAM;oBAAE,GAAGT,QAAQ;gBAAC;YACtB;QACF,EAAE,OAAOU,OAAO;YACd,MAAM,IAAIH,4BAAa,CAAC,KAAK;QAC/B;IACF;IAEA,aAAaK,OAAOT,EAAU,EAAE;QAC9B,IAAI;YACF,OAAO,MAAMJ,gBAAM,CAACC,QAAQ,CAACY,MAAM,CAAC;gBAAEN,OAAO;oBAAEH;gBAAG;YAAE;QACtD,EAAE,OAAOO,OAAO;YACd,MAAM,IAAIH,4BAAa,CAAC,KAAK;QAC/B;IACF;AACF"}